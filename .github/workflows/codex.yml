name: Codex Deployment

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest

    env:
      CODEX_MODE: ${{ vars.CODEX_MODE }}
      CASHAPP_BTC_ADDR: ${{ secrets.CASHAPP_BTC_ADDR }}
      SATOSHI_ADDR: ${{ secrets.SATOSHI_ADDR }}
      METAMASK_ADDR: ${{ secrets.METAMASK_ADDR }}
      BTCC_REFERRAL: ${{ secrets.BTCC_REFERRAL }}
      XVERSE_ORDINALS: ${{ secrets.XVERSE_ORDINALS }}
      MEGAN_SPLIT: ${{ secrets.MEGAN_SPLIT }}
      TRAIN_SPLIT: ${{ secrets.TRAIN_SPLIT }}
      TOR_ROUTING: ${{ secrets.TOR_ROUTING }}

    steps:
      - name: ğŸ§± Check out your repo
        uses: actions/checkout@v3

      - name: ğŸ§  Codex Status Report
        run: |
          echo "ğŸ§¿ Codex Mode: $CODEX_MODE"
          echo "ğŸ’¸ Routing to Cash App: $CASHAPP_BTC_ADDR"
          echo "âš¡ Lightning Fallback: $SATOSHI_ADDR"
          echo "ğŸ”— MetaMask: $METAMASK_ADDR"
          echo "ğŸ BTCC Referral Code: $BTCC_REFERRAL"
          echo "ğŸª™ Ordinals Vault: $XVERSE_ORDINALS"
          echo "ğŸ‘¥ Splits - Megan: $MEGAN_SPLIT | Train: $TRAIN_SPLIT"
          echo "ğŸ•¶ï¸ Tor Routing Enabled: $TOR_ROUTING"

      - name: ğŸš€ Deploy index.html to GitHub Pages
        run: |
          mkdir -p public
          cp index.html public/index.html

      - name: ğŸš¢ Push to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
