name: Codex Deployment

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest

    env:
      CODEX_MODE: ${{ vars.CODEX_MODE }}
      CASHAPP_BTC_ADDR: ${{ secrets.CASHAPP_BTC_ADDR }}
      SATOSHI_ADDR: ${{ secrets.SATOSHI_ADDR }}
      METAMASK_ADDR: ${{ secrets.METAMASK_ADDR }}
      BTCC_REFERRAL: ${{ secrets.BTCC_REFERRAL }}
      XVERSE_ORDINALS: ${{ secrets.XVERSE_ORDINALS }}
      MEGAN_SPLIT: ${{ secrets.MEGAN_SPLIT }}
      TRAIN_SPLIT: ${{ secrets.TRAIN_SPLIT }}
      TOR_ROUTING: ${{ secrets.TOR_ROUTING }}

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Display Codex Operational Mode
        run: echo "üßø Codex running in $CODEX_MODE mode"

      - name: Show Routing & Wallets
        run: |
          echo "üí∏ BTC to Cash App: $CASHAPP_BTC_ADDR"
          echo "‚ö° Satoshi Lightning Address: $SATOSHI_ADDR"
          echo "üß¨ MetaMask: $METAMASK_ADDR"
          echo "üèÅ BTCC Referral: $BTCC_REFERRAL"
          echo "ü™ô Ordinals Vault: $XVERSE_ORDINALS"
          echo "ü§ù Split ‚Äî Megan: $MEGAN_SPLIT | Train: $TRAIN_SPLIT"
          echo "üï∂Ô∏è Tor Layer Enabled: $TOR_ROUTING"

      - name: Deploy index.html to GitHub Pages
        run: |
          mkdir -p public
          cp index.html public/index.html

      - name: Push to GitHub Pages branch
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
